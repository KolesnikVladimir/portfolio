$(document).ready(function () { $('.img-pop').magnificPopup({ type: 'image', removalDelay: 1000, callbacks: { beforeOpen: function () { this.st.image.markup = this.st.image.markup.replace('mfp-figure', 'mfp-figure mfp-with-anim'); this.st.mainClass = this.st.el.attr('data-effect'); } }, tLoading: 'Loading image #%curr%...', mainClass: 'mfp-img-mobile', gallery: { enabled: true, navigateByImgClick: true, preload: [0, 1] }, image: { tError: '<a href="%url%">The image #%curr%</a> could not be loaded.', } }); $('.video-pop').magnificPopup({ disableOn: 700, type: 'iframe', mainClass: 'mfp-fade', removalDelay: 160, preloader: false, fixedContentPos: true }); }); $(".search svg").click(function (e) { $(".search").addClass("open"); e.preventDefault(); }); $(".login").click(function (e) { $("body").addClass("hidden-after"); $(".burger-auth").addClass("active"); e.preventDefault(); }); $("#rem_pwd").click(function (e) { $('.burger-auth').removeClass('active'); $("body").addClass("hidden-after"); $(".burger-recovery").addClass("active"); e.preventDefault(); }); $(".check-in").click(function (e) { $('.burger-auth').removeClass('active'); $("body").addClass("hidden-after"); $(".burger-regis").addClass("active"); e.preventDefault(); }); $(".feedback").click(function (e) { $("body").addClass("hidden-after"); $(".burger-feedback").addClass("active"); e.preventDefault(); }); $(".cart .ico").click(function (e) { $(".cart").addClass("action"); $(".cart-block-size").addClass("open"); e.preventDefault(); }); $(".mobile-munu").click(function (e) { $("body").addClass("hidden-after"); $("header nav").addClass("active"); e.preventDefault(); }); $('.slider-owl').owlCarousel({ margin: 0, loop: true, autoplay: true, autoplayTimeout: 8000, animateIn: 'fadeIn', animateOut: 'fadeOut', items: 1 }); $('.catalog-owl').owlCarousel({ margin: 30, loop: true, autoplay: true, autoplayTimeout: 5000, nav: true, autoplayHoverPause: true, responsive: { 0: { items: 1 }, 630: { items: 1 }, 900: { items: 1 }, 1200: { items: 1 } } }); $('.trustus-slider').owlCarousel({ margin: 30, loop: true, autoplay: true, autoplayTimeout: 5000, nav: true, autoplayHoverPause: true, responsive: { 0: { items: 1 }, 500: { items: 2 }, 630: { items: 3 }, 900: { items: 4 }, 1200: { items: 5 } } }); $('.company-slider').owlCarousel({ loop: true, autoplay: true, autoplayTimeout: 5000, nav: true, autoplayHoverPause: true, responsive: { 0: { items: 3 }, 500: { items: 5 }, 630: { items: 7 }, 800: { items: 4 }, 900: { items: 5 }, 1200: { items: 7 } } }); $('.project-owl').owlCarousel({ margin: 0, loop: true, autoplay: true, autoplayTimeout: 5000, nav: true, autoplayHoverPause: true, items: 1 }); $(".certificates-slide").owlCarousel({ margin: 30, loop: true, autoplay: true, autoplayTimeout: 5000, nav: true, autoplayHoverPause: true, responsive: { 0: { items: 1 }, 400: { items: 2 }, 630: { items: 3 }, 900: { items: 4 }, } }); $('.menu_close_btn, .auth_close_btn').click(function (e) { $('.burger-menu').removeClass('active'); $('.burger-auth').removeClass('active'); $('.burger-regis').removeClass('active'); $('.burger-feedback').removeClass('active'); $('.burger-recovery').removeClass('active'); $('body').removeClass('hidden-after'); e.preventDefault(); }); $('header nav .menu_close_btn').click(function (e) { $('header nav').removeClass('active'); $('body').removeClass('hidden-after'); e.preventDefault(); }); $(".block-select").click(function () { if (!$(this).hasClass('active')) { var child = $(this).find(".views-form-select"); $(this).removeClass("active"); $(this).find(".views-widget").removeAttr('style'); $(this).toggleClass("active"); $(this).find(".views-widget").css("height", (child.height() + 30) + "px").css("padding", "20px 0px 7.5px 0px"); } else { $(this).removeClass("active"); $(this).find(".views-widget").removeAttr('style'); } }); $(".fill-sort").click(function () { if (!$(this).hasClass('active')) { var child = $(this).find("ul"); $(this).removeClass("active"); $(this).find(".fill-sort-hidden").removeAttr('style'); $(this).toggleClass("active"); $(this).find(".fill-sort-hidden").css("height", (child.height() + 50) + "px").css("padding", "20px 10px 10px 10px"); } else { $(this).removeClass("active"); $(this).find(".fill-sort-hidden").removeAttr('style'); } }); $(".block-select .form-item label").click(function () { var text_label = $(this).text(); var input = $(this).parent().parent().parent().parent().find("input"); var label = $(this).parent().parent().parent().parent().find("label").first(); label.text(text_label); input.val(text_label); }); $(".fill-sort .fill-sort-cont ul li").click(function () { var text_label = $(this).text(); var label = $(this).parent().parent().parent().parent().find(".select"); label.text(text_label); }); $(document).mouseup(function (e) { var div = $(".block-select"); if (!div.is(e.target) && div.has(e.target).length === 0) { div.removeClass("active"); div.find(".views-widget").removeAttr('style'); } }); $(document).mouseup(function (e) { var div = $(".fill-sort"); if (!div.is(e.target) && div.has(e.target).length === 0) { div.removeClass("active"); div.find(".fill-sort-hidden").removeAttr('style'); } }); $('.close_btn').click(function (e) { $(".cart").removeClass("active"); $('.cart-block-size').removeClass('open'); e.preventDefault(); }); $(".sidebar .item .title").click(function () { $(this).parent().toggleClass("open").find(".cont").slideToggle(); }); $(document).mouseup(function (e) { var div = $(".cart-block-size"); if (!div.is(e.target) && div.has(e.target).length === 0) { div.removeClass("open"); } }); function plusButton(plus) { var quantityQty = $(plus).siblings(".qty").attr("name"); var num = 0; var num = Number($("[name='" + quantityQty + "']").val()) + 1; $("[name='" + quantityQty + "']").val(num); if ($(plus).hasClass("cartDE")) { updateCh(plus); } } function minusButton(minus) { var quantityQty = $(minus).siblings(".qty").attr("name"); var num = 0; if ($("[name='" + quantityQty + "']").val() > 0) { var num = Number($("[name='" + quantityQty + "']").val()) - 1; $("[name='" + quantityQty + "']").val(num); } if ($(minus).hasClass("cartDE")) { updateCh(minus); } } if (screen.width < 1220) { $('.li-a-cat').click(function (e) { $(this).next().toggleClass("open"); $(this).next().children().slideToggle(); e.preventDefault(); }); } fileInput('fileUpload', 'fileBtn', 'fileName', "Прекрепить файл..."); $('form').each(function () { if ($(this).attr('id') == 'add_order_form' || $(this).attr('id') == 'registration') { $("#" + $(this).attr('id') + " .fileBtn").html("Прекрепить реквизиты..."); } if ($(this).attr('id') == 'feedback') { $("#" + $(this).attr('id') + " .fileBtn").html("Прекрепить..."); } }); var dataCoordOd = $('.map').attr("data-id-coord"); if (dataCoordOd == 1) { if (screen.width < 800) { var coordinatesCenter = [47.232817, 39.595636]; $(".contact .tabs-contact input:radio").click(function () { if ($(this).val() == "ofis") { $("#proiz.tabs-cont").hide(); $("#ofis.tabs-cont").show(); myMap.panTo([47.232817, 39.595636], { delay: 1500 }); } if ($(this).val() == "proiz") { $("#ofis.tabs-cont").hide(); $("#proiz.tabs-cont").show(); myMap.panTo([47.2904, 39.5240], { delay: 1500 }); } }); } else { var coordinatesCenter = [47.232401, 39.602743]; $(".contact .tabs-contact input:radio").click(function () { if ($(this).val() == "ofis") { $("#proiz.tabs-cont").hide(); $("#ofis.tabs-cont").show(); myMap.panTo([47.232401, 39.602743], { delay: 1500 }); } if ($(this).val() == "proiz") { $("#ofis.tabs-cont").hide(); $("#proiz.tabs-cont").show(); myMap.panTo([47.2903, 39.5340], { delay: 1500 }); } }); } } if (dataCoordOd == 2) { var coordinatesCenter = [47.232817, 39.595636]; $(".contact-page .tabs-contact input:radio").click(function () { if ($(this).val() == "ofis") { $("#proiz.tabs-cont").hide(); $("#ofis.tabs-cont").show(); myMap.panTo([47.232817, 39.595636], { delay: 1500 }); } if ($(this).val() == "proiz") { $("#ofis.tabs-cont").hide(); $("#proiz.tabs-cont").show(); myMap.panTo([47.2904, 39.5240], { delay: 1500 }); } }); } $('.js-accept-cookies').on('click', function (e) { e.preventDefault(); createCookie('privacy', 'true', 3650); $(this).closest('.attention').addClass('is-hidden'); }); function createCookie(name, value, days) { var expires = ""; if (days) { var date = new Date(); date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000)); expires = "; expires=" + date.toUTCString(); } document.cookie = name + "=" + value + expires + "; path=/"; } $('.open-pass#p1').on('click', function () { if ($('#f_Password1').attr('type') == 'password') { $('#f_Password1').attr('type', 'text'); $(this).addClass("open"); } else { $('#f_Password1').attr('type', 'password'); $(this).removeClass("open"); } }); $('.open-pass#p2').on('click', function () { if ($('#f_Password2').attr('type') == 'password') { $('#f_Password2').attr('type', 'text'); $(this).addClass("open"); } else { $('#f_Password2').attr('type', 'password'); $(this).removeClass("open"); } }); $('.open-pass#p0').on('click', function () { if ($('[name="AUTH_PW"]').attr('type') == 'password') { $('[name="AUTH_PW"]').attr('type', 'text'); $(this).addClass("open"); } else { $('[name="AUTH_PW"]').attr('type', 'password'); $(this).removeClass("open"); } }); var spinner = $('.ymap-container').children('.loader'); var check_if_load = 0; var myMap, myPlacemark; function init() { myMap = new ymaps.Map('map', { center: coordinatesCenter, zoom: 16, controls: ['zoomControl'] }, { searchControlProvider: 'yandex#search' }); MyIconContentLayout = ymaps.templateLayoutFactory.createClass( '<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>' ), myPlacemark = new ymaps.Placemark([47.232817, 39.595636], { hintContent: 'Офис компании<br>г. Ростов-На-Дону, ул. Еременко, д. 101, ком. 42', balloonContent: 'г. Ростов-На-Дону, ул. Еременко, д. 101, ком. 42' }, { iconLayout: 'default#image', iconImageHref: 'https://kvazar-grupp.ru/layout/img/marker.svg', iconImageSize: [119, 119], iconImageOffset: [-65, -72] }), myPlacemark2 = new ymaps.Placemark([47.2904, 39.5240], { hintContent: 'Производство<br>Ростовская обл., Мясниковский р-н, с. Крым, ул. Большесальская, д. 18', balloonContent: 'Ростовская обл., Мясниковский р-н, с. Крым, ул. Большесальская, д. 18' }, { iconLayout: 'default#image', iconImageHref: 'https://kvazar-grupp.ru/layout/img/marker.svg', iconImageSize: [119, 119], iconImageOffset: [-65, -72] }); myMap.geoObjects.add(myPlacemark2).add(myPlacemark); var layer = myMap.layers.get(0).get(0); waitForTilesLoad(layer).then(function () { spinner.removeClass('is-active'); }); } function resizeIframe(obj) { obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px'; } function waitForTilesLoad(layer) { return new ymaps.vow.Promise(function (resolve, reject) { var tc = getTileContainer(layer), readyAll = true; tc.tiles.each(function (tile, number) { if (!tile.isReady()) { readyAll = false; } }); if (readyAll) { resolve(); } else { tc.events.once("ready", function () { resolve(); }); } }); } function getTileContainer(layer) { for (var k in layer) { if (layer.hasOwnProperty(k)) { if (layer[k] instanceof ymaps.layer.tileContainer.CanvasContainer || layer[k] instanceof ymaps.layer.tileContainer.DomContainer) { return layer[k]; } } } return null; } function loadScript(url, callback) { var script = document.createElement("script"); if (script.readyState) { script.onreadystatechange = function () { if (script.readyState == "loaded" || script.readyState == "complete") { script.onreadystatechange = null; callback(); } }; } else { script.onload = function () { callback(); }; } script.src = url; document.getElementsByTagName("head")[0].appendChild(script); } var ymap = function () { $('.ymap-container').mouseenter(function () { if (check_if_load == 0) { check_if_load = 1; spinner.addClass('is-active'); loadScript("https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;loadByRequire=1", function () {ymaps.load(init);}); } }); }; $(function () { ymap(); });